var base;!function(t){var e=function(){function t(){this._totalReqsCount=0,this._loadedReqsCount=0,this._textures=[]}var e=(__define,t),i=e.prototype;return i.loadUrl=function(t,e,i,h,a){this._textures.length=0,this._totalReqsCount=t.length,this._loadedReqsCount=0,this._endCallback=e,this._endCallbackThis=i,this._proCallback=h,this._proCallbackThis=a;for(var n=0,r=t.length;r>n;++n){var s=new egret.URLLoader;s.dataFormat=egret.URLLoaderDataFormat.TEXTURE,s.addEventListener(egret.Event.COMPLETE,this.oneLoadFinish,this),s.addEventListener(egret.IOErrorEvent.IO_ERROR,this.oneError,this),s.load(new egret.URLRequest(t[n]))}},i.oneError=function(t){console.warn("resource load failed!"),void 0!=this._proCallback&&this._proCallback.call(this._proCallbackThis,this._loadedReqsCount+1,this._totalReqsCount),++this._loadedReqsCount>=this._totalReqsCount&&void 0!=this._endCallback&&this._endCallback.call(this._endCallbackThis,this._textures)},i.oneLoadFinish=function(t){this._textures.push(t.target.data),void 0!=this._proCallback&&this._proCallback.call(this._proCallbackThis,this._loadedReqsCount+1,this._totalReqsCount),++this._loadedReqsCount>=this._totalReqsCount&&void 0!=this._endCallback&&this._endCallback.call(this._endCallbackThis,this._textures)},t}();t.PictureLoader=e,egret.registerClass(e,"base.PictureLoader")}(base||(base={}));var base;!function(t){var e=function(){function t(){}var e=(__define,t),i=e.prototype;return i.init=function(){var t=window;this.jsTunnel=t.jsTunnel;var e=this;this.jsTunnel.egretCallBack=function(t){e.callBack(t)}},i.callExtendJs=function(t){return this.jsTunnel.callExtend.apply(void 0,t)},i.callBack=function(t){console.log("in callBack",t)},t}();t.JsTunnel=e,egret.registerClass(e,"base.JsTunnel");var i=function(t){function e(){t.call(this),this._wxPhotos=[]}__extends(e,t);var i=(__define,e),h=i.prototype;return h.play=function(t){this._wxPhotos=t,this.start()},h.start=function(){},e}(egret.DisplayObjectContainer);t.Player=i,egret.registerClass(i,"base.Player")}(base||(base={}));var m50;!function(t){var e=function(t){function e(e){t.call(this),this.idx=0,this.texturs=e,this.addEventListener(egret.Event.ADDED_TO_STAGE,this.addPicture,this)}__extends(e,t);var i=(__define,e),h=i.prototype;return h.addPicture=function(){var t=new egret.Bitmap;t.texture=RES.getRes("bg"),t.width=this.stage.stageWidth,t.height=this.stage.stageHeight,this.addChild(t);var e=new egret.Bitmap;e.texture=RES.getRes("bottom1"),e.width=this.stage.width;var i=e.width/e.height;e.height=e.width/i,e.x=0,e.y=0,this.addChild(e);var h=new egret.Bitmap;h.texture=RES.getRes("bottom2"),h.width=this.stage.stageWidth;var a=h.width/h.height;h.height=h.width/a,h.x=0,h.y=this.stage.stageHeight-h.height,this.addChild(h),this.firstScreen()},h.firstScreen=function(){var t=new egret.Sprite;t.width=this.stage.stageWidth,t.height=this.stage.stageHeight,this.addChild(t);var e=this;egret.setTimeout(function(){e.p1(t),egret.setTimeout(function(){e.p2(t),egret.setTimeout(function(){e.p3(t)},this,4500)},this,4500)},this,500),egret.setInterval(function(){egret.setTimeout(function(){e.p1(t),egret.setTimeout(function(){e.p2(t),egret.setTimeout(function(){e.p3(t)},this,4500)},this,4500)},this,500)},this,15e3)},h.p1=function(t){var e=new egret.Sprite;e.width=.75*t.width,e.height=e.width;var i=new egret.Bitmap;i.texture=this.texturs[this.idx],this.idx=++this.idx%this.texturs.length;var h=i.width/i.height;h>=1?(i.height=e.height,i.width=i.height*h):h>0&&1>h&&(i.width=e.width,i.height=i.width/h),i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2,i.x=e.width/2,i.y=e.height/2,e.addChild(i);var a=new egret.Bitmap;a.texture=RES.getRes("mask");var n=0,r=0,s=e.width,d=e.height;a.x=n,a.y=r,a.width=e.width,a.height=e.height,a.blendMode=egret.BlendMode.ERASE,e.addChild(a);var o=new egret.RenderTexture;o.drawToTexture(e,new egret.Rectangle(n,r,s,d));var g=new egret.Sprite;g.width=e.width,g.height=e.height,g.anchorOffsetX=g.width/2,g.anchorOffsetY=g.height/2,g.x=.3*-t.width,g.y=.5*t.height;var i=new egret.Bitmap(o);i.x=0,i.y=0,g.addChild(i),t.addChild(g);var l=new egret.Bitmap;l.texture=RES.getRes("circle"),l.width=1.1*a.width,l.height=1.1*a.height,l.anchorOffsetX=l.width/2,l.anchorOffsetY=l.height/2,l.x=.3*-t.width,l.y=.5*t.height,t.addChild(l),l.rotation=-90,egret.Tween.get(l).to({x:.5*t.width,rotation:0},1500).to({rotation:60},1500).to({x:.5*-t.width},2500).call(function(){l.parent.removeChild(l)},this),g.rotation=-90,egret.Tween.get(g).to({x:.5*t.width,rotation:0},1500).wait(1500).to({x:.5*-t.width},2500).call(function(){g.parent.removeChild(g)},this);var w=new egret.Bitmap;w.texture=RES.getRes("bike");var c=w.width/w.height;w.width=150,w.height=w.width/c,w.anchorOffsetX=w.width/2,w.anchorOffsetY=w.height/2,w.x=-w.width,w.y=.87*t.height,t.addChild(w),egret.Tween.get(w).to({x:.5*t.width},2900).to({scaleY:-1,rotation:180},10).to({x:.3*-t.width},2800).call(function(){w.parent.removeChild(w)},this);var u=new egret.Bitmap;u.texture=RES.getRes("qiu");var f=u.width/u.height;u.width=.15*t.width,u.height=u.width/f,u.anchorOffsetX=u.width/2,u.anchorOffsetY=u.height/2,u.x=t.width,u.y=.2*t.height,this.addChild(u),egret.Tween.get(u).to({x:.7*t.width,y:.15*t.height},1500).to({x:.5*t.width,y:.2*t.height},1500).to({x:.3*t.width,y:.15*t.height},1500).to({x:.1*t.width,y:.15*t.height},1500).to({x:0,y:.1*t.height,alpha:0},1500).call(function(){u.parent.removeChild(u)},this)},h.p2=function(t){var e=new egret.Sprite,i=new egret.Bitmap;i.texture=this.texturs[this.idx],this.idx=++this.idx%this.texturs.length,i.x=0,i.y=0;var h=i.width/i.height;h>1?(i.width=.85*t.width,i.height=i.width/h):h>0&&1>h?(i.height=.7*t.height,i.width=i.height*h):(i.width=.77*t.width,i.height=i.width/h),e.width=i.width,e.height=i.height,e.x=1.6*t.width,e.y=.5*t.height,e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,t.addChild(e),e.addChildAt(i,3);var a=new egret.Bitmap;i.width>i.height?(a.texture=RES.getRes("bg44"),a.width=1.05*i.width,a.height=1.05*i.height):i.width==i.height?(a.texture=RES.getRes("bg5"),a.width=1.12*i.width,a.height=1.15*i.height):(a.texture=RES.getRes("bg33"),a.width=1.05*i.width,a.height=1.05*i.height),a.anchorOffsetX=a.width/2,a.anchorOffsetY=a.height/2,a.x=e.width/2,a.y=e.height/2,e.addChildAt(a,4),egret.Tween.get(e).to({x:.5*t.width},2e3).wait(1500).to({x:.3*-t.width,y:1.3*t.height},2500).call(function(){e.parent.removeChild(e)},this);var n=new egret.Bitmap;n.texture=RES.getRes("cloud");var r=n.width/n.height;n.width=.2*i.width,n.height=n.width/r,n.x=20,n.y=20,e.addChild(n);var s=new egret.Bitmap;s.texture=RES.getRes("feichuan");var d=s.width/s.height;s.height=.1*t.height,s.width=s.height*d,s.x=t.width,s.y=.15*t.height,t.addChild(s),egret.Tween.get(s).to({x:.7*t.width,y:.1*t.height},1500).to({x:.5*t.width,y:.15*t.height},1500).to({x:.3*t.width,y:.1*t.height},1500).to({x:.1*t.width,y:.15*t.height,alpha:0},1500).call(function(){s.parent.removeChild(s)},this);var o=new egret.Bitmap;o.texture=RES.getRes("bike2");var g=o.width/o.height;o.width=150,o.height=o.width/g,o.x=1.7*t.width,o.y=.79*t.height+o.height,o.anchorOffsetX=o.width,o.anchorOffsetY=o.height,t.addChild(o),egret.Tween.get(o).wait(800).to({x:1.4*t.width},500).to({x:1.1*t.width},500).to({x:.8*t.width},1e3).to({x:.6*t.width},1e3).to({x:.4*t.width},1e3).to({x:.2*t.width},1e3).to({x:0,alpha:0},1e3).call(function(){o.parent.removeChild(o)},this)},h.p3=function(t){var e=new egret.Sprite,i=new egret.Bitmap;i.texture=this.texturs[this.idx],this.idx=++this.idx%this.texturs.length,i.x=0,i.y=0;var h=i.width/i.height;i.width=.6*t.width,i.height=i.width/h,h>1?(i.width=.85*t.width,i.height=i.width/h):h>0&&1>h?(i.height=.7*t.height,i.width=i.height*h):(i.width=.77*t.width,i.height=i.width/h),e.width=i.width,e.height=i.height,e.x=1.5*t.width,e.y=.6*-t.height,e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,t.addChild(e),e.addChildAt(i,3);var a=new egret.Bitmap;i.width>i.height?(a.texture=RES.getRes("bg44"),a.width=1.05*i.width,a.height=1.05*i.height,a.anchorOffsetX=a.width/2,a.anchorOffsetY=a.height/2,a.x=e.width/2,a.y=e.height/2):i.width==i.height?(a.texture=RES.getRes("bg5"),a.width=1.12*i.width,a.height=1.15*i.height,a.anchorOffsetX=a.width/2,a.anchorOffsetY=a.height/2,a.x=e.width/2,a.y=e.height/2):(a.texture=RES.getRes("bg33"),a.width=1.05*i.width,a.height=1.05*i.height,a.anchorOffsetX=a.width/2,a.anchorOffsetY=a.height/2,a.x=e.width/2,a.y=e.height/2),e.addChildAt(a,4),egret.Tween.get(e).to({y:.5*t.height,x:.5*t.width},2500).wait(2500).to({x:1.5*t.width},2e3).call(function(){e.parent.removeChild(e)},this);var n=new egret.Sprite;n.width=400,n.height=400,n.x=t.width+n.width/2,n.y=t.height,n.anchorOffsetX=n.width/2,n.anchorOffsetY=n.height/2,t.addChild(n);var r=new egret.Bitmap;r.texture=RES.getRes("yingzi"),r.width=.2*t.width;var s=r.width/r.height;r.height=r.width/s,r.anchorOffsetX=r.width/2,r.anchorOffsetY=r.height/2,r.x=n.width/2,r.y=n.height/2,n.addChild(r);var d=new egret.Bitmap;d.texture=RES.getRes("shenzi"),d.width=.2*t.width;var o=d.width/d.height;d.height=d.width/o,d.anchorOffsetX=d.width/2,d.anchorOffsetY=d.height/2,d.x=n.width/2,d.y=n.height/2,n.addChild(d);var g=new egret.Bitmap;g.texture=RES.getRes("chibang"),g.width=.2*t.width;var l=g.width/g.height;g.height=g.width/l,g.anchorOffsetX=g.width/2,g.anchorOffsetY=g.height,g.x=n.width/2,g.y=n.height/2,g.scaleY=-1,n.addChild(g);var w=new egret.Bitmap;w.texture=RES.getRes("chibang"),w.width=.2*t.width;var c=g.width/w.height;w.height=w.width/c,w.anchorOffsetX=w.width/2,w.anchorOffsetY=w.height,w.x=n.width/2,w.y=n.height/2,w.scaleY=1,n.addChild(w),n.rotation=45,n.alpha=0,egret.Tween.get(n).to({x:t.width,y:.8*t.height,alpha:1},1e3).to({x:.8*t.width,y:.6*t.height},1e3).to({x:.6*t.width,y:.5*t.height},1e3).to({x:.4*t.width,y:.4*t.height},1e3).to({x:.2*t.width,y:.3*t.height},1e3).to({x:0,y:.2*t.height},1500).to({x:.1*-t.width,y:.1*t.height},1500).call(function(){n.parent.removeChild(n)},this),egret.Tween.get(g,{loop:!0}).to({scaleY:-.1},500).to({scaleY:-1},1e3).to({scaleY:-.1},500).to({scaleY:-1},1e3).to({scaleY:-.1},1500).to({scaleY:-1},1750),egret.Tween.get(w,{loop:!0}).to({scaleY:.1},500).to({scaleY:1},1e3).to({scaleY:.1},500).to({scaleY:1},1e3).to({scaleY:.1},1500).to({scaleY:1},1750),egret.Tween.get(r,{loop:!0}).to({scaleY:-.1},500).to({scaleY:-1},1e3).to({scaleY:-.1},500).to({scaleY:-1},1e3).to({scaleY:-.1},1500).to({scaleY:-1},1750)},e}(egret.DisplayObjectContainer);t.PicturePanel=e,egret.registerClass(e,"m50.PicturePanel")}(m50||(m50={}));var m50;!function(t){var e=function(e){function i(){e.call(this)}__extends(i,e);var h=(__define,i),a=h.prototype;return a.start=function(){var e=new t.PicturePanel(this._wxPhotos);this.addChild(e)},i}(base.Player);t.Player=e,egret.registerClass(e,"m50.Player")}(m50||(m50={}));var Main=function(t){function e(){t.call(this),this.jsTunnel=new base.JsTunnel,this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var i=(__define,e),h=i.prototype;return h.onAddToStage=function(t){RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig(e.resJsonPath,e.resFolder),this.jsTunnel.init(),this.jsTunnel.callExtendJs(["changeLoaderText","加载模板中"])},h.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup("m50")},h.onResourceLoadComplete=function(t){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),this.jsTunnel.callExtendJs(["changeLoaderText","加载图片中"]);var e=this.jsTunnel.callExtendJs(["getPics"]),i=new base.PictureLoader;i.loadUrl(e,this.onCreateScene,this,this.onPicProgress,this)},h.onResourceProgress=function(t){this.jsTunnel.callExtendJs(["changeLoaderPro",t.itemsLoaded,t.itemsTotal])},h.onPicProgress=function(t,e){this.jsTunnel.callExtendJs(["changeLoaderPro",t,e])},h.onResourceError=function(t){this.onResourceLoadComplete(t)},h.onCreateScene=function(t){var e=new m50.Player;this.addChild(e),e.play(t),this.jsTunnel.callExtendJs(["initFinish"])},e.resStaticDomain="http://template.bestektv.com/",e.resFolder=e.resStaticDomain+"/Public/Image/",e.resJsonPath=e.resStaticDomain+"/Public/moban/50/resource.json",e}(egret.DisplayObjectContainer);egret.registerClass(Main,"Main");